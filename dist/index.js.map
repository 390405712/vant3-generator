{"version":3,"file":"index.js","sources":["../lib/FormGenerator.tsx"],"sourcesContent":["import { Form, CellGroup, Button, Field, Calendar, Cascader, Popup, Checkbox, CheckboxGroup, Radio, RadioGroup, Switch, Picker, DatetimePicker, Stepper, Uploader } from 'vant'\r\nimport { defineComponent, ref } from 'vue'\r\nimport type { Ref } from 'vue'\r\nimport type { FormAttrs, FormOption } from './type.d'\r\nimport type { Expose } from './vant'\r\nimport type { DatetimePickerType } from 'vant/lib/datetime-picker/types'\r\nimport type { CascaderOption } from 'vant/lib/cascader/types'\r\n\r\nexport default defineComponent({\r\n  name: 'FormGenerator',\r\n  setup(props, { expose, attrs, slots, emit }) {\r\n    const _attrs = attrs as FormAttrs\r\n    const RefFormGenerator = ref()\r\n    const $refs: Record<string, Ref<Expose | undefined>> = {}\r\n    expose(() => ({ ...RefFormGenerator.value, $refs }))\r\n    return () => {\r\n      function renderForm() {\r\n        return (\r\n          <Form class={`FormGenerator`} {..._attrs} ref={RefFormGenerator} >\r\n            <CellGroup>\r\n              {_attrs.formOption.map((formOption) => {\r\n                if (!(formOption.hasOwnProperty('show') && formOption.show === false)) return renderControl(formOption)\r\n              })}\r\n              {_attrs.disabled === true || !_attrs.onSubmit\r\n                ? ''\r\n                : slots?.default\r\n                  ? <>{slots.default()[0].children}</>\r\n                  : <Button block type=\"primary\" native-type=\"submit\">提交</Button>\r\n              }\r\n            </CellGroup>\r\n          </Form >\r\n        )\r\n      }\r\n      function renderField(formOption: FormOption & { showPopup?: boolean }, custom?: boolean) {\r\n        let model = custom ? formOption.formItem.text : _attrs.model[formOption.formItem.name]\r\n        return <Field is-link readonly onClick={_attrs.disabled ? () => '' : () => { formOption.showPopup = true }} inputAlign='right' v-model={model} v-slots={{ ...formOption?.formItem?.slots }} {...formOption.formItem} />\r\n      }\r\n      function formatterDate(scope: Date, type: DatetimePickerType = 'datetime') {\r\n        let val\r\n        switch (type) {\r\n          case 'date':\r\n            val = `${scope.getFullYear()}-${String(scope.getMonth() + 1).padStart(2, '0')}-${String(scope.getDate()).padStart(2, '0')}`\r\n            break;\r\n          case 'datehour':\r\n            val = `${scope.getFullYear()}-${String(scope.getMonth() + 1).padStart(2, '0')}-${String(scope.getDate()).padStart(2, '0')} ${String(scope.getHours()).padStart(2, '0')}`\r\n            break;\r\n          case 'year-month':\r\n            val = `${scope.getFullYear()}-${String(scope.getMonth() + 1).padStart(2, '0')}`\r\n            break;\r\n          case 'month-day':\r\n            val = `${String(scope.getMonth() + 1).padStart(2, '0')}-${String(scope.getDate()).padStart(2, '0')}`\r\n            break;\r\n          case 'time':\r\n            val = scope\r\n            break;\r\n          case 'datetime':\r\n            val = `${scope.getFullYear()}-${String(scope.getMonth() + 1).padStart(2, '0')}-${String(scope.getDate()).padStart(2, '0')} ${String(scope.getHours()).padStart(2, '0')}:${String(scope.getMinutes()).padStart(2, '0')}:${String(scope.getSeconds()).padStart(2, '0')}`\r\n            break;\r\n        }\r\n        return val\r\n      }\r\n      function renderControl(formOption: FormOption) {\r\n        $refs[formOption.formItem.name] = ref()\r\n        switch (formOption.type) {\r\n          case 'field':\r\n            return <Field ref={$refs[formOption.formItem.name]} inputAlign='right' v-model={_attrs.model[formOption.formItem.name]} {...formOption.formItem} {...formOption.control} v-slots={{ ...formOption?.control?.slots }} />\r\n            break;\r\n          case 'checkbox':\r\n            return <Field inputAlign='right' {...formOption.formItem} v-slots={{\r\n              input: () => (\r\n                <CheckboxGroup ref={$refs[formOption.formItem.name]} disabled={_attrs.disabled} direction=\"horizontal\" v-model={_attrs.model[formOption.formItem.name]} {...formOption?.control} >\r\n                  {formOption.control.checkboxGroup.map((controlOptionItem) => (\r\n                    <Checkbox  {...controlOptionItem} name={controlOptionItem.value} v-slots={{ ...controlOptionItem?.slots }} >{controlOptionItem.label}</Checkbox>\r\n                  ))}\r\n                </CheckboxGroup>\r\n              )\r\n            }}>\r\n            </Field>\r\n            break;\r\n          case 'radio':\r\n            return <Field inputAlign='right' {...formOption.formItem} v-slots={{\r\n              input: () => (\r\n                <RadioGroup ref={$refs[formOption.formItem.name]} disabled={_attrs.disabled} direction=\"horizontal\" v-model={_attrs.model[formOption.formItem.name]} {...formOption?.control} >\r\n                  {formOption.control.radioGroup.map((controlOptionItem) => (\r\n                    <Radio name={controlOptionItem.value} v-slots={{ ...controlOptionItem?.slots }} {...controlOptionItem}>{controlOptionItem.label}</Radio>\r\n                  ))}\r\n                </RadioGroup>\r\n              )\r\n            }}>\r\n            </Field>\r\n            break;\r\n          case 'switch':\r\n            return <Field class=\"field-switch\" readonly v-slots={{\r\n              'right-icon': () => (\r\n                <Switch ref={$refs[formOption.formItem.name]} disabled={_attrs.disabled} size=\"24px\" modelValue={_attrs.model[formOption.formItem.name]} onUpdate:modelValue={(val) => { _attrs.model[formOption.formItem.name] = val }} {...formOption?.control} v-slots={{ ...formOption?.control?.slots }} />\r\n              )\r\n            }} {...formOption.formItem} >\r\n            </Field>\r\n            break;\r\n          case 'uploader':\r\n            return <Field readonly inputAlign='right' v-slots={{\r\n              'input': () => (\r\n                <Uploader ref={$refs[formOption.formItem.name]} disabled={_attrs.disabled} v-model={_attrs.model[formOption.formItem.name]} {...formOption?.control} v-slots={{ ...formOption?.control?.slots }} />\r\n              )\r\n            }} {...formOption.formItem} >\r\n            </Field>\r\n            break;\r\n          case 'stepper':\r\n            return <Field readonly v-slots={{\r\n              'right-icon': () => (\r\n                <Stepper ref={$refs[formOption.formItem.name]} disabled={_attrs.disabled} button-size=\"21px\" v-model={_attrs.model[formOption.formItem.name]} {...formOption?.control} />\r\n              )\r\n            }} {...formOption.formItem} >\r\n            </Field>\r\n            break;\r\n          case 'picker':\r\n            return <>\r\n              {renderField(formOption, true)}\r\n              <Popup v-model={[formOption.showPopup, 'show', ['']]} round position=\"bottom\" {...formOption.popup}>\r\n                <Picker ref={$refs[formOption.formItem.name]} v-model={_attrs.model[formOption.formItem.name]}\r\n                  onCancel={() => { formOption.showPopup = false }}\r\n                  onConfirm={(scope) => {\r\n                    formOption.showPopup = false;\r\n                    if (Array.isArray(scope)) {\r\n                      _attrs.model[formOption.formItem.name] = scope.reduce((arr, item) => {\r\n                        arr.push(typeof item === 'object' ? item?.[formOption?.control?.columnsFieldNames?.values ?? 'value'] : item)\r\n                        return arr\r\n                      }, []);\r\n                      formOption.formItem.text = scope.map((item) => typeof item === 'object' ? item?.[formOption?.control?.columnsFieldNames?.text ?? 'text'] : item).join('/');\r\n                    } else {\r\n                      _attrs.model[formOption.formItem.name] = scope[formOption?.control?.columnsFieldNames?.values ?? 'value'];\r\n                      formOption.formItem.text = scope[formOption?.control?.columnsFieldNames?.text ?? 'text'];\r\n                    }\r\n                  }}\r\n                  v-slots={{ ...formOption?.control?.slots }}\r\n                  {...formOption.control}\r\n                />\r\n              </Popup>\r\n            </>\r\n            break;\r\n          case 'datetimePicker':\r\n            return <>\r\n              {renderField(formOption)}\r\n              <Popup v-model={[formOption.showPopup, 'show', ['']]} round position=\"bottom\" {...formOption.popup}>\r\n                <DatetimePicker ref={$refs[formOption.formItem.name]} v-model={_attrs.model[formOption.formItem.name]}\r\n                  onCancel={() => { formOption.showPopup = false }}\r\n                  onChange={(scope: Date) => {\r\n                    _attrs.model[formOption.formItem.name] = formatterDate(scope, formOption?.control?.type)\r\n                  }}\r\n                  onConfirm={(scope: Date) => {\r\n                    formOption.showPopup = false;\r\n                    _attrs.model[formOption.formItem.name] = formatterDate(scope, formOption?.control?.type)\r\n                  }}\r\n                  v-slots={{ ...formOption?.control?.slots }}\r\n                  {...formOption.control}\r\n                />\r\n              </Popup>\r\n            </>\r\n            break;\r\n          case 'calendar':\r\n            return <>\r\n              {renderField(formOption, formOption?.control?.type === 'multiple')}\r\n              <Calendar ref={$refs[formOption.formItem.name]} v-model={[formOption.showPopup, 'show', ['']]}\r\n                show-confirm={formOption?.control?.type === 'multiple'}\r\n                onConfirm={(value) => {\r\n                  formOption.showPopup = false;\r\n                  const formatDate = (date: Date) => `${date?.getFullYear?.()}-${date?.getMonth?.() + 1}-${date?.getDate?.()}`\r\n                  switch (formOption?.control?.type) {\r\n                    case 'multiple':\r\n                      _attrs.model[formOption.formItem.name] = value.reduce((arr: string[], item: Date) => {\r\n                        arr.push(formatDate(item))\r\n                        return arr\r\n                      }, [])\r\n                      formOption.formItem.text = `选择了 ${value.length} 个日期`\r\n                      break;\r\n                    case 'range':\r\n                      _attrs.model[formOption.formItem.name] = `${formatDate(value[0])}~${formatDate(value[1])}`\r\n                      break;\r\n                    default:\r\n                      _attrs.model[formOption.formItem.name] = formatDate(value)\r\n                      break;\r\n                  }\r\n                }}\r\n                v-slots={{ ...formOption?.control?.slots }}\r\n                {...formOption.control}\r\n              />\r\n            </>\r\n            break;\r\n          case 'cascader':\r\n            return <>\r\n              {renderField(formOption, true)}\r\n              <Popup v-model={[formOption.showPopup, 'show', ['']]} round position=\"bottom\" {...formOption.popup}>\r\n                <Cascader ref={$refs[formOption.formItem.name]} v-model={_attrs.model[formOption.formItem.name]}\r\n                  onClose={() => { formOption.showPopup = false }}\r\n                  onFinish={(scope: { value: string | number, selectedOptions: CascaderOption[] }) => {\r\n                    formOption.showPopup = false;\r\n                    _attrs.model[formOption.formItem.name] = scope.value;\r\n                    formOption.formItem.text = scope.selectedOptions.map((item) => item[formOption?.control?.fieldNames?.text ?? 'text']).join('/');\r\n                  }}\r\n                  v-slots={{ ...formOption?.control?.slots }}\r\n                  {...formOption.control}\r\n                />\r\n              </Popup>\r\n            </>\r\n            break;\r\n          case 'slot':\r\n            return <Field readonly inputAlign='right' v-slots={{\r\n              label: () => formOption.formItem.label ?? '',\r\n              ...formOption?.control?.slots,\r\n              input: () => {\r\n                if (formOption?.control?.slots?.input && typeof formOption?.control?.slots?.input === 'function') return <>{formOption?.control?.slots?.input?.({ form: _attrs.model, data: _attrs.model[formOption.formItem.name] })}</>\r\n                if (slots[formOption.formItem.name]) return <>{slots[formOption.formItem.name]?.({ form: _attrs.model, data: _attrs.model[formOption.formItem.name] })}</>\r\n                return _attrs.model[formOption.formItem.name]\r\n              },\r\n            }}\r\n              {...formOption.formItem} />\r\n            break;\r\n        }\r\n      };\r\n      return (\r\n        renderForm()\r\n      )\r\n    }\r\n  },\r\n})"],"names":["_isSlot","s","_isVNode","defineComponent","name","setup","props","expose","attrs","slots","emit","_attrs","RefFormGenerator","ref","$refs","value","renderForm","_createVNode","Form","_mergeProps","CellGroup","formOption","map","hasOwnProperty","show","renderControl","disabled","onSubmit","default","_Fragment","children","Button","_createTextVNode","renderField","custom","model","formItem","text","Field","showPopup","$event","formatterDate","scope","type","val","getFullYear","String","getMonth","padStart","getDate","getHours","getMinutes","getSeconds","control","input","_slot","CheckboxGroup","checkboxGroup","controlOptionItem","label","_slot2","RadioGroup","radioGroup","Radio","Switch","Uploader","Stepper","Popup","popup","Picker","Array","isArray","reduce","arr","item","push","columnsFieldNames","values","join","DatetimePicker","Calendar","formatDate","date","length","Cascader","selectedOptions","fieldNames","form","data"],"mappings":"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"}